<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>注册页面</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" href="images/7favicon.ico" />
	<!-- basic styles -->

	<link href="css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="layer/layui/css/layui.css"  media="all" />

	<!--[if IE 7]>
	<link rel="stylesheet" href="../assets/css/font-awesome-ie7.min.css" />
	<![endif]-->

	<!-- page specific plugin styles -->

	<!-- fonts -->

	<link rel="stylesheet" href="css/fonts.css" />

	<!-- ace styles -->

	<link rel="stylesheet" href="css/ace.min.css" />
	<link rel="stylesheet" href="css/ace-rtl.min.css" />

	<!--[if lte IE 8]>
	<link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
	<![endif]-->

	<!-- inline styles related to this page -->

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

	<!--[if lt IE 9]>
	<script src="../assets/js/html5shiv.js"></script>
	<script src="../assets/js/respond.min.js"></script>
	<![endif]-->
</head>

<body class="login-layout">
<div class="main-container">
	<div class="main-content">
		<div class="row">
			<div class="col-sm-10 col-sm-offset-1">
				<div class="login-container">
					<div class="center">
						<h1>
							<i class="icon-leaf green"></i>
							<span class="red">CC</span>
							<span class="white">博园</span>
						</h1>
					</div>

					<div class="space-6"></div>

					<div class="position-relative">

						<div id="signup-box" class="signup-box visible widget-box no-border">
							<div class="widget-body">
								<div class="widget-main">
									<h4 class="header green lighter bigger">
										<i class="icon-group blue"></i>
										注 册
									</h4>

									<div class="space-6"></div>
									<!-- <p> Enter your details to begin: </p> -->

									<form  class="layui-form">
										<fieldset>
											<label class="block clearfix">
														<span class="block input-icon input-icon-right">
															<input type="text" class="form-control name" maxlength="15" placeholder="用户名" />
															<i class="icon-user"></i>
														</span>

											</label>

											<label class="block clearfix">
														<span class="block input-icon input-icon-right">
															<input type="password" class="form-control psw" maxlength="15" placeholder="密    码" />
															<i class="icon-lock"></i>
														</span>
											</label>

											<label class="block clearfix">
														<span class="block input-icon input-icon-right">
															<input type="password" class="form-control psw1" maxlength="15" placeholder="重复密码" />
															<i class="icon-retweet"></i>
														</span>
											</label>

											<!-- <label class="block">
                                                <input type="checkbox" class="ace" />
                                                <span class="lbl">
                                                    I accept the
                                                    <a href="#">User Agreement</a>
                                                </span>
                                            </label> -->

											<div class="space-24"></div>

											<div class="clearfix">
												<button type="reset" class="width-30 pull-left btn btn-sm">
													<i class="icon-refresh"></i>
													重置
												</button>

												<button type="button" class="submit width-65 pull-right btn btn-sm btn-success">
													注 册
													<i class="icon-arrow-right icon-on-right"></i>
												</button>
											</div>
										</fieldset>
									</form>
								</div>

								<div class="toolbar center">
									已有帐号？点击
									<a href="login.html" class="back-to-login-link">
										<i class="icon-arrow-left"></i>
										返回登录
									</a>
								</div>
							</div><!-- /widget-body -->
						</div><!-- /signup-box -->
					</div><!-- /position-relative -->
				</div>
			</div><!-- /.col -->
		</div><!-- /.row -->
	</div>
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

<!--[if !IE]> -->

<script type="text/javascript">
    window.jQuery || document.write("<script src='js/jquery-2.0.3.min.js'>"+"<"+"/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
	window.jQuery || document.write("<script src='/assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

<script src="layer/layer.js"></script>
<script src="layer/layui/layui.js"></script>
<script>
    if("ontouchend" in document) document.write("<script src='js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
    $('.submit').click(function () {
        var regex = new RegExp(/^[0-9a-zA_Z]+$/);///^[0-9a-zA-Z]{8}$/ /^([a-z]|[A-Z]|[0-9]){8}$/
        var regex1 = new RegExp(/^[a-zA-Z0-9\u4e00-\u9fa5]+$/);
        var $name = $('.name').val();
        var $psw = $('.psw').val();
        var $psw1 = $('.psw1').val();
        if($name.replace(/^ +| +$/g,'')=='') {
            layer.msg('用户名不能为空', {
                icon: 2, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                time: 1500
            });
            return;
        }else if(!regex1.test($name)){
            layer.msg('用户名格式错误(只能为中文、数字和字母)', {
                icon: 2, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                time: 1500
            });
            return;
        }else if($psw.replace(/^ +| +$/g,'')=='' || $psw1.replace(/^ +| +$/g,'')==''){
            layer.msg('密码不能为空',{
                icon: 2, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                time:1500
            });
            return;
        }else if(!regex.test($psw) || !regex.test($psw1)){
            layer.msg('密码格式错误(只能输入字母和数字)',{
                icon: 2, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                time:1500
            });
            return;
        }else if($psw != $psw1){
            layer.msg('两次密码不一致',{
                icon: 5, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                time:1500
            });
            return;
		}else {
            $.ajax({
                url: '/reg',
                type: 'post',
                data: {
                    name: $('.name').val(),
                    password: $('.psw').val()
                },
                success: function (data) {
                    //console.log(data);
					if(data.err){
                        layer.msg('用户名已存在',{
                            icon: 5, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                            time:1500
                        });
                        return;
					}
                    layer.msg('注册成功',{
                        icon: 6, //1，绿勾  2，红叉  3，黄问号  4，灰色锁头  5，红色委屈脸  6，绿色笑脸 7，黄色感叹号
                        time:1500
                    });
					setTimeout(function () {
                        window.location.href = '/login';
                    },1000);
                },
                error: function (data) {
                    // 返回的值不是规定的 dataType  类型的话，那么就会返回到 error 这个函数当中来
                    //console.log(data);
                }
            });
        }
    });
</script>

<!-- inline scripts related to this page -->

<!-- <script type="text/javascript">
    function show_box(id) {
     jQuery('.widget-box.visible').removeClass('visible');
     jQuery('#'+id).addClass('visible');
    }
</script> -->
</body>
</html>
